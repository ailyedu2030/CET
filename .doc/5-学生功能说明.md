# 学生端功能说明文档

## 一、系统核心架构 (STU-01)

**智能训练闭环系统**：
通过学生训练数据反馈 → 分析知识点掌握度 → 教师调整教学策略 → 优化训练内容推送

- 数据流向：学生训练数据实时同步至教师和管理员端 [API: `/api/data-sync/student-performance`]
- 实时反馈：训练结果即时生成学习建议 [API: `/api/feedback/generate`]
- 自适应学习：系统根据学习表现自动调整难度 [API: `/api/adaptive/adjust-level`]

**核心技术实现**：

- 数据同步采用WebSocket实时推送，确保延迟<500ms
- 反馈生成使用DeepSeek引擎，支持多维度学习评估
- 自适应算法基于贝叶斯模型+强化学习，迭代精度达95%

## 二、用户注册流程 (STU-02)

**学生注册通道** [API: `/api/student/register`]

- 访问路径：首页 → 学生注册入口 → 学生注册页面
- 注册信息清单：
  ▫ 基础信息：姓名/年龄/性别
  ▫ 身份凭证：身份证号码/联系电话
  ▫ 紧急联系：紧急联系人姓名及电话
  ▫ 学业信息：所在学校/院系/专业/年级/班级
- 注册验证：支持手机号验证码验证 [API: `/api/sms/verify`]
- 提交状态：可查询审核进度和结果 [API: `/api/application/status/{applicationId}`]
- 账号激活：审核通过后系统推送激活链接 [API: `/api/account/activate/{token}`]

**技术规格**：

- 注册表单采用分步加载，减少首屏渲染时间
- 验证码有效期5分钟，支持60秒内重发限制
- 敏感信息（身份证号）采用SHA-256加密存储
- 激活链接有效期24小时，支持过期重发

## 三、学生综合训练中心 (STU-03)

### 1. 核心训练模块 [API: `/api/student/training`]

| 训练类型     | 基础配置                      | 智能生成机制                      | API端点                     |
| ------------ | ----------------------------- | --------------------------------- | --------------------------- |
| **词汇训练** | 每日15题（可扩展时长）        | DeepSeek自动生成词性/时态相关题目 | `/api/training/vocabulary`  |
| **听力训练** | 每日3套（短对话/长对话/短文） | 基于真题语料库+AI生成             | `/api/training/listening`   |
| **翻译训练** | 每日2题（5-15分钟）           | 基于课程词汇库+热点生成双语素材   | `/api/training/translation` |
| **阅读理解** | 每周3主题×5题                 | 教师控制考纲/教案关联生成         | `/api/training/reading`     |
| **写作训练** | 每周应用文+其他类型各1题      | 按四级标准智能命题                | `/api/training/writing`     |

- 训练进度：自动记录和展示完成进度 [API: `/api/progress/training/{studentId}`]
- 时间统计：记录各类训练消耗时间 [API: `/api/analytics/time-spent/{studentId}`]
- 断点续练：支持中途暂停后继续训练 [API: `/api/training/resume/{sessionId}`]

**技术架构**：

- 训练模块采用微服务架构，支持独立部署和横向扩展
- 题目生成引擎采用缓存机制，减少实时生成负载
- 断点续练基于Redis持久化，会话数据保留72小时

### 2. 通用功能机制 [API: `/api/student/mechanism`]

- **题目生成**：
  ▫ 基于课程词汇库+热点/考纲/教案动态生成 [API: `/api/generator/questions`]
  ▫ 支持教师自定义命题参数（主题/数量/关联度）[API: `/api/teacher/parameters/set`]
  ▫ 智能去重：避免重复题目生成 [API: `/api/generator/deduplicate`]

- **智能批改**： [API: `/api/student/grading`]
  ▫ DeepSeek自动批阅+答案解析 [API: `/api/grading/auto`]
  ▫ 错题自动归集至错题本 [API: `/api/mistakes/collect`]
  ▫ 批改详情：提供详细的评分点和修改建议 [API: `/api/grading/details/{submissionId}`]

- **数据反馈**： [API: `/api/student/feedback`]
  ▫ 知识点薄弱环节分析报告推送教师端 [API: `/api/reports/weakpoints/{studentId}`]
  ▫ 实时更新学生词汇掌握量统计（总量/已掌握数）[API: `/api/statistics/vocabulary/{studentId}`]
  ▫ 可视化展示知识点掌握热力图 [API: `/api/visualization/heatmap/{studentId}`]
  ▫ 学习建议：自动生成针对性学习建议 [API: `/api/suggestions/generate/{studentId}`]

**实现细节**：

- 题目去重使用布隆过滤器，误判率<0.1%
- 批改系统支持多模型调用（小型模型批改客观题，大型模型批改主观题）
- 热力图采用D3.js渲染，支持多维度筛选和时间序列展示

### 3. 错题强化系统 [API: `/api/student/mistakes`]

- **智能诊断**：
  ▫ 基于错题分析知识短板 [API: `/api/diagnosis/knowledge-gaps`]
  ▫ 生成针对性强化题目 [API: `/api/generator/reinforcement`]
  ▫ 问题分类：自动将错题按知识点分类 [API: `/api/mistakes/categorize`]

- **记忆优化**：
  ▫ 按艾宾浩斯遗忘曲线规划复习频率 [API: `/api/schedule/spaced-repetition`]
  ▫ 持续推送直至掌握达标 [API: `/api/notification/review-reminder`]
  ▫ 记忆提醒：定时推送复习提醒通知 [API: `/api/notification/send`]

**技术实现**：

- 知识短板分析使用知识图谱技术，支持关联性弱点识别
- 艾宾浩斯复习曲线基于用户历史表现动态调整
- 通知系统支持多渠道推送（应用内、短信、邮件）

### 4. 自适应机制 [API: `/api/student/adaptive`]

- **动态难度调节**：
  ▫ 根据训练表现智能调整题目难度层级 [API: `/api/adaptive/difficulty-adjust`]
  ▫ 单词释义即时标注辅助学习 [API: `/api/tooltip/word-definition`]
  ▫ 进阶提示：达到一定正确率后提示可升级难度 [API: `/api/notification/level-up`]

**算法说明**：

- 难度调节使用5级动态层级，基于近10次训练正确率计算
- 释义标注支持离线词库+在线查询双模式
- 词汇难度评定采用综合指标（词频、长度、近期使用率）

### 5. 听力训练系统 [API: `/api/student/listening`]

- **题型分类**：
  ▫ 短对话训练（8个对话×1题）[API: `/api/listening/short-conversations`]
  ▫ 长对话训练（2段对话×3题）[API: `/api/listening/long-conversations`]
  ▫ 短文理解（3篇短文×3题）[API: `/api/listening/passages`]
  ▫ 讲座训练（1篇讲座×5题）[API: `/api/listening/lectures`]

- **训练特性**：
  ▫ 语音识别：支持口语跟读练习 [API: `/api/listening/speech-recognition`]
  ▫ 音频控制：支持语速调节/重复播放 [API: `/api/listening/audio-control`]
  ▫ 实时字幕：训练模式下可显示字幕辅助 [API: `/api/listening/subtitles`]
  ▫ 听写练习：支持单词/短语听写训练 [API: `/api/listening/dictation`]

- **智能辅助**：
  ▫ 音标训练：针对性音标识别练习 [API: `/api/listening/phonetics`]
  ▫ 听力技巧：场景化听力应试技巧 [API: `/api/listening/skills`]
  ▫ 难点标注：自动标注个人听力难点 [API: `/api/listening/difficulties`]
  ▫ 错题分析：听力题目错误原因分析 [API: `/api/listening/mistakes`]

**技术实现**：

- 音频处理：使用FFmpeg进行音频转码和处理
- 语音识别：集成Azure Speech Services
- 实时字幕：基于WebVTT技术实现
- 音标训练：使用IPA（国际音标）标准

## 四、英语四级写作标准库 (STU-04)

### 1. 题型分类矩阵 [API: `/api/student/writing/matrix`]

| 写作类型       | 核心特征            | 典型例题                 | API端点                                |
| -------------- | ------------------- | ------------------------ | -------------------------------------- |
| **议论文**     | 三段论结构+观点论证 | "人工智能的利弊分析"     | `/api/writing/templates/argumentative` |
| **说明文**     | 现象/过程解释       | "法律形成过程解析"       | `/api/writing/templates/expository`    |
| **应用文**     | 格式规范+实用性强   | "志愿者招募海报设计"     | `/api/writing/templates/practical`     |
| **图表作文**   | 数据趋势分析        | "大学生就业率柱状图解读" | `/api/writing/templates/chart`         |
| **现象解释型** | 成因对策双维度      | "校园手机沉迷现象对策"   | `/api/writing/templates/phenomenon`    |

- 类型练习：可按题型单独练习 [API: `/api/writing/practice/{type}`]
- 真题推送：定期推送历年真题 [API: `/api/writing/past-papers`]
- 热点题材：融合时事热点的写作题目 [API: `/api/writing/trending-topics`]

**架构设计**：

- 题型矩阵基于模板引擎构建，支持快速扩展新题型
- 真题库与国家教育考试中心保持同步更新
- 热点话题通过爬虫服务每日从主流媒体采集

### 2. 评分标准体系 [API: `/api/student/writing/standards`]

| 分数档 | 核心标准            | 典型表现                   |
| ------ | ------------------- | -------------------------- |
| 14分   | 结构严谨+语言流畅   | 无重大语法错误，句式多样化 |
| 11分   | 逻辑通顺+少量错误   | 基本实现主题句-支撑句结构  |
| 8分    | 内容模糊+多语法错误 | 存在主谓不一致等基础错误   |
| 5分    | 内容断裂+严重错误   | 出现跑题或格式错误         |

- 范文推荐：各分数段配有范文 [API: `/api/writing/samples/{score-level}`]
- 评分解析：详细解释评分原因 [API: `/api/grading/writing/explanation/{submissionId}`]
- 历史对比：与历次写作成绩对比分析 [API: `/api/analytics/writing/comparison/{studentId}`]

**评分机制**：

- 使用分层评分模型，先评估宏观结构，再评估微观表达
- 引入人机协同评分，确保评分准确性
- 支持批量评分优化，高峰期处理能力>1000篇/小时

### 3. 智能写作辅助 [API: `/api/student/writing/assistant`]

- **模板库**：内置10+种高分模板框架 [API: `/api/writing/templates/list`]
- **语言优化器**：
  ▫ 同义词替换建议 [API: `/api/writing/suggest/synonyms`]
  ▫ 句式复杂度分析 [API: `/api/writing/analyze/complexity`]
  ▫ 语法错误实时检测 [API: `/api/writing/check/grammar`]
- **时间管理**：30分钟智能倒计时+5分钟检查提醒 [API: `/api/timer/writing`]
- 写作提示：提供思路启发性提示 [API: `/api/writing/hints`]
- 实时保存：自动保存写作进度，防止意外丢失 [API: `/api/writing/autosave`]

**技术特性**：

- 实时语法检查基于轻量级语言模型，延迟<200ms
- 句式分析引入16种复杂度指标，包括T单位和从句比例
- 自动保存采用增量保存策略，每15秒保存一次变更

## 五、学习计划与管理 (STU-05)

### 1. 个人学习中心 [API: `/api/student/study-center`]

- 课程表查看 [API: `/api/schedule/courses/{studentId}`]
- 学习计划制定 [API: `/api/plan/create`]
- 学习提醒设置 [API: `/api/notification/settings`]
- 进度追踪：可视化展示总体学习进度 [API: `/api/progress/overview/{studentId}`]

### 2. 学习数据管理 [API: `/api/student/data`]

- 学习历史记录 [API: `/api/history/learning/{studentId}`]
- 成绩趋势分析 [API: `/api/analytics/performance-trend`]
- 学习时间统计 [API: `/api/analytics/time-distribution`]
- 数据导出：支持导出学习数据报告 [API: `/api/export/reports/{studentId}`]

**数据架构**：

- 学习数据采用星型数据仓库模型存储
- 支持实时分析和离线分析双模式
- 报告生成支持多种格式（PDF、Excel、HTML）

## 六、社交与互动 (STU-06)

### 1. 班级讨论区 [API: `/api/student/discussion`]

- 学习问题提问 [API: `/api/discussion/questions/ask`]
- 小组讨论功能 [API: `/api/discussion/groups/{groupId}`]
- 资料共享空间 [API: `/api/resources/shared/{classId}`]
- 匿名提问：支持匿名发布问题 [API: `/api/discussion/anonymous/post`]

### 2. 学习伙伴系统 [API: `/api/student/buddy`]

- 学习伙伴匹配 [API: `/api/buddy/match`]
- 共同目标设定 [API: `/api/buddy/goals/set`]
- 进度互相监督 [API: `/api/buddy/progress/track`]
- 智能匹配：基于学习风格和水平的伙伴推荐 [API: `/api/buddy/recommend`]

**安全策略**：

- 讨论区内容审核采用敏感词过滤+AI内容检测
- 匿名系统保护用户隐私但保留管理员可追溯性
- 社交互动支持举报机制和反骚扰保护

## 七、系统逻辑说明 (STU-07)

1. **双驱动机制**：
   - 学生端：通过智能训练获取实时反馈 [API: `/api/feedback/realtime`]
   - 教师端：依据数据看板优化教学设计 [API: `/api/dashboard/teaching`]
   - 交互周期：学生数据24小时内同步至教师端 [API: `/api/sync/student-to-teacher`]

2. **动态适配原则**：
   - 题目难度随学生能力成长自动升级 [API: `/api/adaptive/difficulty`]
   - 训练强度根据遗忘规律科学规划 [API: `/api/scheduler/training`]
   - 适配算法：基于历史表现的贝叶斯适配模型 [API: `/api/algorithm/bayesian-adapt`]

3. **标准化对接**：
   - 写作模块深度整合四级考核标准 [API: `/api/integration/cet4-standards`]
   - 所有训练数据兼容教学评估体系 [API: `/api/compatibility/assessment`]
   - 数据标准：采用教育数据标准格式，便于跨系统迁移 [API: `/api/data/standards`]

4. **可视化监控**：
   - 学习进度仪表盘 [API: `/api/dashboard/progress`]
   - 知识点掌握热力图 [API: `/api/visualization/knowledge-heatmap`]
   - 数据更新：每日凌晨进行数据汇总和报表生成 [API: `/api/scheduler/daily-summary`]

**架构说明**：

- 双驱动机制通过消息队列实现解耦，保证系统稳定性
- 适配算法每日重新训练，确保动态反映最新学习状态
- 热力图渲染采用WebGL加速，支持大规模知识点可视化

## 八、学习辅助工具 (STU-08)

### 1. 智能学习助手 [API: `/api/student/assistant`]

- 智能问答功能 [API: `/api/assistant/qa`]
- 学习资源推荐 [API: `/api/assistant/recommend`]
- 个性化学习建议 [API: `/api/assistant/personalized-advice`]
- 语音交互：支持语音提问和指令 [API: `/api/assistant/voice`]

### 2. 学习资源库 [API: `/api/student/resources`]

- 自学资料检索 [API: `/api/resources/search`]
- 扩展阅读材料 [API: `/api/resources/readings`]
- 多媒体学习资源 [API: `/api/resources/multimedia`]
- 智能推荐：基于学习进度智能推荐相关资源 [API: `/api/resources/smart-recommend`]

**技术实现**：

- 智能问答基于RAG检索增强技术，覆盖90%常见学习问题
- 语音交互支持离线语音识别，准确率>95%
- 资源推荐采用协同过滤+内容过滤混合算法

## 技术实现说明

1. **前端技术**：
   - 移动优先设计，响应式UI（基于React Native）
   - 渐进式Web应用（PWA），支持离线模式
   - 移动端：提供iOS/Android原生应用
   - 状态管理：采用Redux+RTK管理全局状态

2. **性能优化**：
   - 首屏加载时间<3秒（通过代码分割和懒加载）
   - 训练模块预加载机制（预测用户行为提前加载）
   - 图片资源懒加载（使用IntersectionObserver API）
   - 本地缓存常用数据（IndexedDB+LocalStorage分层存储）
   - 网络传输：采用HTTP/2+Brotli压缩

3. **离线支持**：
   - 关键训练模块支持离线使用（Service Worker缓存策略）
   - 自动同步机制，网络恢复后上传数据（背景同步API）
   - 断网提醒和自动保存功能（使用navigator.onLine检测）
   - 冲突处理：采用CRDT算法解决同步冲突

4. **安全措施**：
   - 数据传输加密（HTTPS+TLS 1.3）
   - 敏感信息脱敏处理（RSA+AES混合加密）
   - 未成年人保护机制（使用时长限制、深夜禁用）
   - 会话管理：15分钟无操作自动登出（JWT+刷新令牌）
   - 防护策略：实施CSP和CSRF防护

5. **与教师端集成**：
   - 学生训练数据实时同步至教师分析面板（WebSocket/SSE）
   - 教师反馈直接推送至学生账户（消息队列+实时通知）
   - 双向消息通道，支持及时沟通（Signal协议端到端加密）
   - 权限控制：基于RBAC模型，细粒度访问控制

6. **数据同步策略**：
   - 关键行为实时同步（登录、提交作业）
   - 学习数据批量同步（每15分钟）
   - 资源文件增量更新（按需下载）
   - 同步优化：采用差量同步算法，减少90%传输量
