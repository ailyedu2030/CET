# 英语四级学习系统 - 生产环境变量配置
# 请根据实际生产环境修改以下配置

# ===========================================
# 基础应用配置
# ===========================================

# 应用环境
ENVIRONMENT=production

# 调试模式（生产环境必须为false）
DEBUG=false

# 应用密钥（请使用强密钥）
SECRET_KEY=your-production-secret-key-change-this-to-a-very-secure-random-string

# 允许的主机名
ALLOWED_HOSTS=cet4-learning.com,www.cet4-learning.com,admin.cet4-learning.com

# CORS允许的源
CORS_ORIGINS=https://cet4-learning.com,https://www.cet4-learning.com,https://admin.cet4-learning.com

# Docker镜像标签
IMAGE_TAG=latest

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL配置
POSTGRES_DB=cet4_learning_prod
POSTGRES_USER=cet4_user_prod
POSTGRES_PASSWORD=your-very-secure-postgres-password-change-this

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# ===========================================
# Redis缓存配置
# ===========================================

# Redis密码
REDIS_PASSWORD=your-very-secure-redis-password-change-this

# Redis连接池配置
REDIS_POOL_SIZE=10
REDIS_POOL_TIMEOUT=5

# ===========================================
# MinIO对象存储配置
# ===========================================

# MinIO访问凭证
MINIO_ROOT_USER=cet4admin
MINIO_ROOT_PASSWORD=your-very-secure-minio-password-change-this

# MinIO存储桶配置
MINIO_BUCKET_NAME=cet4-learning-prod
MINIO_SECURE=true

# ===========================================
# AI服务配置
# ===========================================

# DeepSeek API密钥（请替换为实际的API密钥）
DEEPSEEK_API_KEYS=sk-your-api-key-1,sk-your-api-key-2,sk-your-api-key-3

# DeepSeek API配置
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_MAX_TOKENS=4000
DEEPSEEK_TEMPERATURE=0.7

# AI服务限流配置
AI_RATE_LIMIT_PER_MINUTE=60
AI_RATE_LIMIT_PER_HOUR=1000
AI_RATE_LIMIT_PER_DAY=10000

# ===========================================
# 日志配置
# ===========================================

# 日志级别
LOG_LEVEL=INFO

# 日志文件路径
LOG_FILE=/app/logs/app.log

# 日志轮转配置
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10

# 结构化日志
LOG_JSON_FORMAT=true

# ===========================================
# 安全配置
# ===========================================

# JWT配置
JWT_SECRET_KEY=your-jwt-secret-key-change-this-to-a-very-secure-random-string
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 密码加密配置
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# API限流配置
API_RATE_LIMIT_PER_MINUTE=100
API_RATE_LIMIT_PER_HOUR=1000

# ===========================================
# 邮件服务配置
# ===========================================

# SMTP服务器配置
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USER=noreply@cet4-learning.com
SMTP_PASSWORD=your-email-password-change-this
SMTP_TLS=true

# 邮件发送配置
EMAIL_FROM=noreply@cet4-learning.com
EMAIL_FROM_NAME=CET4学习系统

# ===========================================
# 文件上传配置
# ===========================================

# 上传文件大小限制（字节）
MAX_UPLOAD_SIZE=10485760  # 10MB

# 允许的文件类型
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,txt,mp3,mp4

# 上传目录
UPLOAD_DIR=/app/uploads

# ===========================================
# 缓存配置
# ===========================================

# 缓存TTL配置（秒）
CACHE_TTL_SHORT=300      # 5分钟
CACHE_TTL_MEDIUM=1800    # 30分钟
CACHE_TTL_LONG=3600      # 1小时
CACHE_TTL_VERY_LONG=86400 # 24小时

# ===========================================
# 任务队列配置
# ===========================================

# Celery配置
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/2

# Celery任务配置
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# ===========================================
# 监控配置
# ===========================================

# Prometheus监控
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8001

# Grafana配置
GRAFANA_ADMIN_PASSWORD=your-secure-grafana-password-change-this

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=30

# ===========================================
# 第三方服务配置
# ===========================================

# 百度翻译API（可选）
BAIDU_TRANSLATE_APP_ID=your-baidu-app-id
BAIDU_TRANSLATE_SECRET_KEY=your-baidu-secret-key

# 有道词典API（可选）
YOUDAO_APP_KEY=your-youdao-app-key
YOUDAO_APP_SECRET=your-youdao-app-secret

# ===========================================
# 生产环境特定配置
# ===========================================

# 生产环境工作进程配置
PROD_WORKERS=4
PROD_MAX_REQUESTS=1000
PROD_MAX_REQUESTS_JITTER=100

# SSL配置
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem

# ===========================================
# 监控和告警配置
# ===========================================

# Slack通知配置
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url

# 邮件告警配置
ALERT_EMAIL_RECIPIENTS=admin@cet4-learning.com,ops@cet4-learning.com

# 告警阈值配置
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=80
DISK_ALERT_THRESHOLD=85
ERROR_RATE_ALERT_THRESHOLD=5

# ===========================================
# 备份配置
# ===========================================

# 数据库备份配置
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
DB_BACKUP_RETENTION_DAYS=30

# 文件备份配置
FILE_BACKUP_ENABLED=true
FILE_BACKUP_SCHEDULE=0 3 * * *  # 每天凌晨3点
FILE_BACKUP_RETENTION_DAYS=7

# ===========================================
# 性能配置
# ===========================================

# 并发配置
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30

# 缓存配置
ENABLE_QUERY_CACHE=true
ENABLE_RESPONSE_CACHE=true

# 压缩配置
ENABLE_GZIP=true
GZIP_LEVEL=6

# ===========================================
# 特性开关
# ===========================================

# 功能开关
FEATURE_AI_TUTOR=true
FEATURE_SOCIAL_LEARNING=true
FEATURE_GAMIFICATION=true
FEATURE_ANALYTICS=true
FEATURE_REAL_TIME_CHAT=true

# 实验性功能（生产环境建议关闭）
EXPERIMENTAL_FEATURES=false

# ===========================================
# 域名和CDN配置
# ===========================================

# 主域名
PRIMARY_DOMAIN=cet4-learning.com

# CDN配置
CDN_ENABLED=true
CDN_DOMAIN=cdn.cet4-learning.com

# 静态文件域名
STATIC_DOMAIN=static.cet4-learning.com
